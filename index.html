<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.tailwindcss.com; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https:; object-src 'none'; frame-ancestors 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO and Professional Meta Tags -->
    <title>Kapisch - Portfolio | Web Developer & Creative Projects</title>
    <meta name="description" content="Welcome to Kapisch's portfolio - showcasing innovative web applications, creative projects, and cutting-edge development work. Explore my latest projects including Life Hacks Germany, Tank Alert, and more.">
    <meta name="keywords" content="web developer, portfolio, javascript, react, web applications, creative projects, full stack developer">
    <meta name="author" content="Kapisch">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://onekapisch.github.io/onekapischofficialwebsite/">
    <meta property="og:title" content="Kapisch - Portfolio | Web Developer & Creative Projects">
    <meta property="og:description" content="Welcome to Kapisch's portfolio - showcasing innovative web applications and creative projects.">
    <meta property="og:image" content="https://onekapisch.github.io/onekapischofficialwebsite/new-folder/Githubprofile.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://onekapisch.github.io/onekapischofficialwebsite/">
    <meta property="twitter:title" content="Kapisch - Portfolio | Web Developer & Creative Projects">
    <meta property="twitter:description" content="Welcome to Kapisch's portfolio - showcasing innovative web applications and creative projects.">
    <meta property="twitter:image" content="https://onekapisch.github.io/onekapischofficialwebsite/new-folder/Githubprofile.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://onekapisch.github.io/onekapischofficialwebsite/">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#000000">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="icon" href="new-folder/libra.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
      </script>
      <script defer src="/_vercel/insights/script.js"></script>
</head>
<body class="bg-black">
    <canvas id="bg-canvas"></canvas>

    <div class="content-container" id="main-content">
        <div id="container" style="pointer-events: none; z-index: 0;"></div>
        <div class="glow" style="pointer-events: none; z-index: 0;"></div>
        <h1 id="welcome-title" class="text-5xl sm:text-5xl md:text-6xl font-black text-white tracking-wider leading-tight" style="font-family: 'Montserrat', sans-serif; position: relative; z-index: 2;">
            Kapisch
        </h1>
        <button id="fly-btn" class="btn-76 mt-10">
            View My Projects
            <span class="top"></span>
            <span class="right"></span>
            <span class="bottom"></span>
            <span class="left"></span>
        </button>
    </div>

    <div class="tiles-section" id="tiles-section">
        <!-- GitHub Profile Section -->
        <div id="github-profile" style="position: relative; z-index: 1000; cursor: pointer; text-align: center;">
            <a href="https://www.github.com/onekapisch" target="_blank" rel="noopener noreferrer">
                <img src="new-folder/Github.png" alt="GitHub Logo" class="github-logo">
            </a>
        </div>
        <!-- Portal Grid -->
        <div id="portals-grid" class="portals-grid">
            <!-- Portal 1: SkyLocation -->
            <div class="portal-container"
                 data-project-id="skylocation"
                 data-url="http://skylocation.app"
                 data-target="_blank"
                 data-image="new-folder/skylocation.png"
                 data-title="SkyLocation"
                 data-subtitle="Find your location in the Sky - Offline">
                <canvas class="portal-canvas"></canvas>
                <div class="portal-content">
                    <div class="portal-image-wrapper">
                        <img src="new-folder/skylocation.png" alt="SkyLocation Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/0f172a/38bdf8?text=SkyLocation';">
                    </div>
                    <div class="portal-title">SkyLocation</div>
                    <div class="portal-subtitle">Find your location in the Sky or Land - 100% Offline</div>
                </div>
                <div class="constellation-label">SkyLocation</div>
            </div>

            <!-- Portal 2: T-Minus AI -->
            <div class="portal-container"
                 data-project-id="tminusai"
                 data-url="http://tminusai.com"
                 data-target="_blank"
                 data-image="new-folder/tminus.png"
                 data-title="T-Minus AI"
                 data-subtitle="Learn & Master AI">
                <canvas class="portal-canvas"></canvas>
                <div class="portal-content">
                    <div class="portal-image-wrapper">
                        <img src="new-folder/tminus.png" alt="T-Minus AI Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=T-Minus+AI';">
                    </div>
                    <div class="portal-title">T-Minus AI</div>
                    <div class="portal-subtitle">Learn & Master AI</div>
                </div>
                <div class="constellation-label">T-Minus AI</div>
            </div>

            <!-- Portal 3: Life Hacks Germany -->
            <div class="portal-container"
                 data-project-id="lifehacks"
                 data-url="https://lifehacksgermany.com"
                 data-target="_blank"
                 data-image="new-folder/Lifehacksgermany.png"
                 data-title="Life Hacks Germany"
                 data-subtitle="Cool life hacks, finance and tax tips">
                <canvas class="portal-canvas"></canvas>
                <div class="portal-content">
                    <div class="portal-image-wrapper">
                        <img src="new-folder/Lifehacksgermany.png" alt="Life Hacks Germany Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=Life+Hacks+DE';">
                    </div>
                    <div class="portal-title">Life Hacks Germany</div>
                    <div class="portal-subtitle">Cool life hacks, finance and tax tips</div>
                </div>
                <div class="constellation-label">Life Hacks Germany</div>
            </div>

            <!-- Portal 4: Tank Alert -->
            <div class="portal-container"
                 data-project-id="tankalert"
                 data-url="https://tankalert.de"
                 data-target="_blank"
                 data-image="new-folder/TankAlert1.png"
                 data-title="Tank Alert"
                 data-subtitle="Find Best Fuel Prices in Germany & Get Notified">
                <canvas class="portal-canvas"></canvas>
                <div class="portal-content">
                    <div class="portal-image-wrapper">
                        <img src="new-folder/TankAlert1.png" alt="Tank Alert Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=Tank+Alert';">
                    </div>
                    <div class="portal-title">Tank Alert</div>
                    <div class="portal-subtitle">Find Best Fuel Prices in Germany</div>
                </div>
                <div class="constellation-label">Tank Alert</div>
            </div>

            <!-- Portal 5: Adidab -->
            <div class="portal-container"
                 data-project-id="adidab"
                 data-url="https://adidab.com"
                 data-target="_blank"
                 data-image="new-folder/adidab1.png"
                 data-title="Adidab"
                 data-subtitle="">
                <canvas class="portal-canvas"></canvas>
                <div class="portal-content">
                    <div class="portal-image-wrapper">
                        <img src="new-folder/adidab1.png" alt="Adidab Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=Adidab';">
                    </div>
                    <div class="portal-title">Adidab</div>
                    <div class="portal-subtitle"></div>
                </div>
                <div class="constellation-label">Adidab</div>
            </div>

            <!-- Portal 6: More Projects -->
            <div class="portal-container portal-more-projects"
                 id="tile-4"
                 data-project-id="more-projects"
                 data-url="fun-projects/"
                 data-target="_self"
                 data-title="More Projects"
                 data-subtitle="Explore More">
                <canvas class="portal-canvas"></canvas>
                <div class="portal-content portal-content-placeholder">
                    <div class="portal-placeholder-text">More Projects</div>
                    <div class="portal-subtitle">Explore More</div>
                </div>
                <div class="constellation-label">More Projects</div>
            </div>
        </div>
        <div class="back-home-wrapper text-center">
            <button id="back-home-btn" class="btn-76" type="button">
                Back to Home
                <span class="top"></span>
                <span class="right"></span>
                <span class="bottom"></span>
                <span class="left"></span>
            </button>
        </div>
    </div>

    <button id="contact-btn" class="fixed z-50 bottom-6 right-6 group">
        <div class="futuristic-card flex items-center justify-center w-16 h-16 shadow-lg transition-transform group-hover:scale-105 p-0 m-0" style="background: linear-gradient(135deg, #111827 60%, #667eea 100%); border-radius: 1.5rem;">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14c-4.418 0-8 1.79-8 4v2h16v-2c0-2.21-3.582-4-8-4z" />
            </svg>
        </div>
        <span class="absolute right-20 bottom-1 bg-[#667eea] text-white px-4 py-1 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity text-sm font-semibold" style="font-family: 'Montserrat', sans-serif;">Contact me</span>
    </button>

    <!-- Transmission Portal Contact Modal -->
    <div id="contact-modal" class="transmission-modal hidden">
        <!-- Backdrop with stars -->
        <div class="transmission-backdrop">
            <div class="backdrop-stars"></div>
        </div>

        <!-- Portal Container -->
        <div class="transmission-portal">
            <!-- Outer Ring Animation -->
            <div class="portal-outer-ring">
                <svg viewBox="0 0 200 200" class="ring-svg">
                    <defs>
                        <linearGradient id="portalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#38bdf8;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#667eea;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#5eead4;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <circle cx="100" cy="100" r="95" class="ring-track"/>
                    <circle cx="100" cy="100" r="95" class="ring-progress"/>
                </svg>
            </div>

            <!-- Inner Glow -->
            <div class="portal-inner-glow"></div>

            <!-- Scan Lines -->
            <div class="scan-lines"></div>

            <!-- Floating Particles -->
            <div class="portal-particles" id="portal-particles"></div>

            <!-- Portal Content -->
            <div class="portal-content-wrapper">
                <!-- Close Button -->
                <button id="close-modal" class="portal-close-btn" aria-label="Close">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>

                <!-- Header -->
                <div class="portal-header">
                    <div class="signal-indicator">
                        <span class="signal-dot"></span>
                        <span class="signal-dot"></span>
                        <span class="signal-dot"></span>
                    </div>
                    <h2 class="portal-title-text">Transmission Portal</h2>
                    <div class="connection-status">
                        <span class="status-text">CONNECTED</span>
                    </div>
                </div>

                <!-- Form -->
                <form id="contact-form" class="portal-form" action="https://formspree.io/f/xpwpvdln" method="POST">
                    <div class="form-field">
                        <label class="field-label">SENDER ID</label>
                        <div class="input-wrapper">
                            <input type="text" name="name" placeholder="Enter your name" required autocomplete="name">
                            <div class="input-glow"></div>
                        </div>
                    </div>

                    <div class="form-field">
                        <label class="field-label">FREQUENCY</label>
                        <div class="input-wrapper">
                            <input type="email" name="email" placeholder="Enter your email" required autocomplete="email">
                            <div class="input-glow"></div>
                        </div>
                    </div>

                    <div class="form-field">
                        <label class="field-label">MESSAGE DATA</label>
                        <div class="input-wrapper textarea-wrapper">
                            <textarea name="message" placeholder="Type your message..." required rows="4"></textarea>
                            <div class="input-glow"></div>
                        </div>
                    </div>

                    <button type="submit" class="transmit-btn">
                        <span class="btn-text">TRANSMIT</span>
                        <span class="btn-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                            </svg>
                        </span>
                        <div class="btn-particles"></div>
                    </button>
                </form>

                <!-- Success Message -->
                <div id="contact-success" class="transmission-success hidden">
                    <div class="success-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                    </div>
                    <p class="success-text">Transmission Successful</p>
                    <p class="success-subtext">Message received across the cosmos</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="script.js" defer></script>
    <script>
    // Security: Input sanitization function
    function sanitizeText(text) {
        if (typeof text !== 'string') return '';
        // Remove potentially harmful characters and HTML tags
        return text.replace(/[<>"'&]/g, function(match) {
            const escapeChars = {
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#x27;',
                '&': '&amp;'
            };
            return escapeChars[match];
        }).substring(0, 500); // Limit length to prevent DoS
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        const tilesSection = document.getElementById('tiles-section');
        const contactBtn = document.getElementById('contact-btn');
        const mainContent = document.getElementById('main-content');
        const flyBtn = document.getElementById('fly-btn');
        const githubProfile = document.getElementById('github-profile');

        // Function to show GitHub profile and tiles section
        function showSecondPage() {
            mainContent.classList.add('hidden');
            tilesSection.classList.add('active');
            githubProfile.style.display = 'flex'; // <-- Ensure visible and clickable
        }

        // Event listener for "Enter the Galaxy" button
        if (flyBtn) {
            flyBtn.addEventListener('click', showSecondPage);
        }

        // Seamless transition for "More Projects" tile
        const moreProjectsTile = document.getElementById('tile-4');
        if (moreProjectsTile) {
            moreProjectsTile.addEventListener('click', function(e) {
                e.preventDefault();
                document.body.style.transition = 'opacity 0.5s ease-out';
                document.body.style.opacity = 0;
                setTimeout(() => {
                    window.location.href = moreProjectsTile.href;
                }, 500);
            });
        }

        // Modal logic (updated to use 'show' class)
        const contactModal = document.getElementById('contact-modal');
        const closeModal = document.getElementById('close-modal');
        const contactForm = document.getElementById('contact-form');
        const contactSuccess = document.getElementById('contact-success');

        if (contactBtn && contactModal && closeModal) {
            const openModal = (e) => {
                if (e) e.preventDefault();
                contactModal.classList.remove('hidden');
                contactModal.classList.add('show');
            };
            const closeModalFn = (e) => {
                if (e) e.preventDefault();
                contactModal.classList.remove('show');
                contactModal.classList.add('hidden');
            };
            contactBtn.addEventListener('click', openModal);
            closeModal.addEventListener('click', closeModalFn);
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) closeModalFn(e);
            });
            // ESC to close
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && contactModal.classList.contains('show')) {
                    closeModalFn();
                }
            });
            // Expose helpers for debugging if needed
            window.__openContactModal = openModal;
            window.__closeContactModal = closeModalFn;
        }

        // Form submit logic (remains the same)
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                fetch(contactForm.action, {
                    method: 'POST',
                    body: new FormData(contactForm),
                    headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        contactForm.reset(); // Clear the form
                        contactForm.style.display = 'none'; // Hide form
                        contactSuccess.classList.remove('hidden'); // Show success
                        // Optionally hide modal after a delay
                        setTimeout(() => {
                            contactModal.classList.remove('show');
                            contactModal.classList.add('hidden');
                            // Reset for next time
                            contactForm.style.display = 'flex';
                            contactSuccess.classList.add('hidden');
                        }, 3000);
                    } else {
                         response.json().then(data => {
                           if (Object.hasOwn(data, 'errors')) {
                             // Sanitize error messages before displaying
                             const sanitizedErrors = data["errors"]
                                 .map(error => sanitizeText(error["message"] || 'Unknown error'))
                                 .join(", ");
                             alert(sanitizedErrors || 'There was a problem sending your message. Please try again.');
                           } else {
                             alert('There was a problem sending your message. Please try again.');
                           }
                         }).catch(() => {
                             alert('There was a problem sending your message. Please try again.');
                         });
                    }
                }).catch(() => {
                    alert('There was a problem sending your message. Check your connection and try again.');
                });
            });
        }
    });
    </script>
</body>
</html>
