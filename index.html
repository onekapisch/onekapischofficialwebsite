<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' https://cdn.tailwindcss.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.tailwindcss.com; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https:; object-src 'none'; frame-ancestors 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO and Professional Meta Tags -->
    <title>Kapisch - Portfolio | Web Developer & Creative Projects</title>
    <meta name="description" content="Welcome to Kapisch's portfolio - showcasing innovative web applications, creative projects, and cutting-edge development work. Explore my latest projects including Life Hacks Germany, Tank Alert, and more.">
    <meta name="keywords" content="web developer, portfolio, javascript, react, web applications, creative projects, full stack developer">
    <meta name="author" content="Kapisch">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://onekapisch.github.io/onekapischofficialwebsite/">
    <meta property="og:title" content="Kapisch - Portfolio | Web Developer & Creative Projects">
    <meta property="og:description" content="Welcome to Kapisch's portfolio - showcasing innovative web applications and creative projects.">
    <meta property="og:image" content="https://onekapisch.github.io/onekapischofficialwebsite/new-folder/Githubprofile.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://onekapisch.github.io/onekapischofficialwebsite/">
    <meta property="twitter:title" content="Kapisch - Portfolio | Web Developer & Creative Projects">
    <meta property="twitter:description" content="Welcome to Kapisch's portfolio - showcasing innovative web applications and creative projects.">
    <meta property="twitter:image" content="https://onekapisch.github.io/onekapischofficialwebsite/new-folder/Githubprofile.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://onekapisch.github.io/onekapischofficialwebsite/">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#000000">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="icon" href="https://img.icons8.com/?size=100&id=111032&format=png&color=000000">
    <link rel="stylesheet" href="style.css">
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
      </script>
      <script defer src="/_vercel/insights/script.js"></script>
</head>
<body class="bg-black">
    <canvas id="bg-canvas"></canvas>

    <div class="content-container" id="main-content">
        <div id="container" style="pointer-events: none; z-index: 0;"></div>
        <div class="glow" style="pointer-events: none; z-index: 0;"></div>
        <h1 id="welcome-title" class="text-5xl sm:text-5xl md:text-6xl font-black text-white tracking-wider leading-tight" style="font-family: 'Montserrat', sans-serif; position: relative; z-index: 2;">
            Kapisch
        </h1>
        <button id="fly-btn" class="btn-76 mt-10">
            View My Projects
            <span class="top"></span>
            <span class="right"></span>
            <span class="bottom"></span>
            <span class="left"></span>
        </button>
    </div>

    <div class="tiles-section" id="tiles-section">
        <!-- GitHub Profile Section -->
        <div id="github-profile" style="position: relative; z-index: 1000; cursor: pointer; text-align: center;">
            <a href="https://www.github.com/onekapisch" target="_blank" rel="noopener noreferrer">
                <img src="new-folder/Github.png" alt="GitHub Logo" class="github-logo">
            </a>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-10 lg:gap-12 w-full max-w-6xl mx-auto">
            <a href="https://apps.apple.com/de/app/skylocation/id6751451868?l=en-GB" target="_blank" class="futuristic-card-link" id="tile-skylocation" rel="noopener noreferrer">
                <div class="futuristic-card">
                    <div class="futuristic-card-image">
                        <img src="new-folder/skyweb.png"
                             alt="SkyLocation Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/0f172a/38bdf8?text=SkyLocation';">
                    </div>
                </div>
                <div class="futuristic-card-title">SkyLocation â€” Find your location in the Sky - Offline</div>
            </a>
            <a href="http://tminusai.com" class="futuristic-card-link" aria-disabled="true">
                <div class="futuristic-card">
                    <div class="futuristic-card-image">
                        <img src="new-folder/tminus.png"
                             alt="T-Minus AI Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=T-Minus+AI';">
                    </div>
                </div>
                <div class="futuristic-card-title">
                    T-Minus AI
                    <span class="futuristic-card-subtitle">Learn &amp; Master AI</span>
                </div>
            </a>
            <a href="https://lifehacksgermany.com" target="_blank" class="futuristic-card-link" id="tile-1" rel="noopener noreferrer">
                <div class="futuristic-card">
                    <div class="futuristic-card-image">
                        <img src="new-folder/Lifehacksgermany.png"
                             alt="Life Hacks Germany Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=Life+Hacks+DE';">
                    </div>
                </div>
                <div class="futuristic-card-title">Life Hacks Germany! Cool life hacks, finance and tax tips.</div>
            </a>
            <a href="https://tankalert.de" target="_blank" class="futuristic-card-link" id="tile-2" rel="noopener noreferrer">
                <div class="futuristic-card">
                    <div class="futuristic-card-image">
                         <img src="new-folder/Tankalert.png"
                              alt="Tank Alert Preview"
                             onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=Tank+Alert';">
                    </div>
                </div>
                 <div class="futuristic-card-title">Find Best Fuel Prices in Germany! Set Price alarms, Fuel tips and much more.</div>
            </a>
            <a href="https://adidab.com" target="_blank" class="futuristic-card-link" id="tile-3" rel="noopener noreferrer">
                <div class="futuristic-card">
                     <div class="futuristic-card-image">
                         <img src="new-folder/adidab.png"
                              alt="Tech Deal Pro Preview"
                              onerror="this.onerror=null; this.src='https://placehold.co/400x300/111827/667eea?text=TechDealPro';">
                     </div>
                 </div>
                <div class="futuristic-card-title">Adidab</div>
            </a>
            <a href="fun-projects/" id="tile-4" class="futuristic-card-link fun-project-card">
                <div class="futuristic-card fun-project-card">
                    <div class="futuristic-card-content-placeholder">
                        <span class="text-4xl font-bold text-white" style="font-family: 'Montserrat', sans-serif;">More Projects</span>
                    </div>
                </div>
                <div class="futuristic-card-title">Explore More</div>
            </a>
        </div>
        <div class="back-home-wrapper text-center">
            <button id="back-home-btn" class="btn-76" type="button">
                Back to Home
                <span class="top"></span>
                <span class="right"></span>
                <span class="bottom"></span>
                <span class="left"></span>
            </button>
        </div>
    </div>

    <button id="contact-btn" class="fixed z-50 bottom-6 right-6 group">
        <div class="futuristic-card flex items-center justify-center w-16 h-16 shadow-lg transition-transform group-hover:scale-105 p-0 m-0" style="background: linear-gradient(135deg, #111827 60%, #667eea 100%); border-radius: 1.5rem;">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14c-4.418 0-8 1.79-8 4v2h16v-2c0-2.21-3.582-4-8-4z" />
            </svg>
        </div>
        <span class="absolute right-20 bottom-1 bg-[#667eea] text-white px-4 py-1 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity text-sm font-semibold" style="font-family: 'Montserrat', sans-serif;">Contact me</span>
    </button>

    <div id="contact-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 hidden">
        <div class="bg-[#111827] rounded-2xl shadow-2xl p-8 w-full max-w-md relative flex flex-col items-center" style="font-family: 'Inter', sans-serif; min-width:320px; max-width:90vw;">
            <button id="close-modal" class="absolute top-3 right-3 text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
            <h2 class="text-2xl font-bold text-white mb-4 text-center" style="font-family: 'Montserrat', sans-serif;">Contact Me</h2>
            <form id="contact-form" class="flex flex-col gap-4 w-full" action="https://formspree.io/f/xpwpvdln" method="POST">
                <input type="text" name="name" placeholder="Your Name" required class="rounded-lg px-4 py-2 bg-[#222b3a] text-white focus:outline-none focus:ring-2 focus:ring-[#667eea]">
                <input type="email" name="email" placeholder="Your Email" required class="rounded-lg px-4 py-2 bg-[#222b3a] text-white focus:outline-none focus:ring-2 focus:ring-[#667eea]">
                <textarea name="message" placeholder="Your Message" required rows="4" class="rounded-lg px-4 py-2 bg-[#222b3a] text-white focus:outline-none focus:ring-2 focus:ring-[#667eea]"></textarea>
                <button type="submit" class="futuristic-card bg-[#667eea] text-white font-bold py-2 rounded-lg hover:bg-[#5561c9] transition-colors">Send</button>
            </form>
            <div id="contact-success" class="hidden text-green-400 mt-4 text-center">Thank you! Your message has been sent.</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="script.js" defer></script>
    <script>
    // Security: Input sanitization function
    function sanitizeText(text) {
        if (typeof text !== 'string') return '';
        // Remove potentially harmful characters and HTML tags
        return text.replace(/[<>"'&]/g, function(match) {
            const escapeChars = {
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#x27;',
                '&': '&amp;'
            };
            return escapeChars[match];
        }).substring(0, 500); // Limit length to prevent DoS
    }
    
    document.addEventListener('DOMContentLoaded', function() {
        const tilesSection = document.getElementById('tiles-section');
        const contactBtn = document.getElementById('contact-btn');
        const mainContent = document.getElementById('main-content');
        const flyBtn = document.getElementById('fly-btn');
        const githubProfile = document.getElementById('github-profile');

        // Function to show GitHub profile and tiles section
        function showSecondPage() {
            mainContent.classList.add('hidden');
            tilesSection.classList.add('active');
            githubProfile.style.display = 'flex'; // <-- Ensure visible and clickable
        }

        // Event listener for "Enter the Galaxy" button
        if (flyBtn) {
            flyBtn.addEventListener('click', showSecondPage);
        }

        // Seamless transition for "More Projects" tile
        const moreProjectsTile = document.getElementById('tile-4');
        if (moreProjectsTile) {
            moreProjectsTile.addEventListener('click', function(e) {
                e.preventDefault();
                document.body.style.transition = 'opacity 0.5s ease-out';
                document.body.style.opacity = 0;
                setTimeout(() => {
                    window.location.href = moreProjectsTile.href;
                }, 500);
            });
        }

        // Modal logic (updated to use 'show' class)
        const contactModal = document.getElementById('contact-modal');
        const closeModal = document.getElementById('close-modal');
        const contactForm = document.getElementById('contact-form');
        const contactSuccess = document.getElementById('contact-success');

        if (contactBtn && contactModal && closeModal) {
            const openModal = (e) => {
                if (e) e.preventDefault();
                contactModal.classList.remove('hidden');
                contactModal.classList.add('show');
            };
            const closeModalFn = (e) => {
                if (e) e.preventDefault();
                contactModal.classList.remove('show');
                contactModal.classList.add('hidden');
            };
            contactBtn.addEventListener('click', openModal);
            closeModal.addEventListener('click', closeModalFn);
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) closeModalFn(e);
            });
            // ESC to close
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && contactModal.classList.contains('show')) {
                    closeModalFn();
                }
            });
            // Expose helpers for debugging if needed
            window.__openContactModal = openModal;
            window.__closeContactModal = closeModalFn;
        }

        // Form submit logic (remains the same)
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                fetch(contactForm.action, {
                    method: 'POST',
                    body: new FormData(contactForm),
                    headers: { 'Accept': 'application/json' }
                }).then(response => {
                    if (response.ok) {
                        contactForm.reset(); // Clear the form
                        contactForm.style.display = 'none'; // Hide form
                        contactSuccess.classList.remove('hidden'); // Show success
                        // Optionally hide modal after a delay
                        setTimeout(() => {
                            contactModal.classList.remove('show');
                            contactModal.classList.add('hidden');
                            // Reset for next time
                            contactForm.style.display = 'flex';
                            contactSuccess.classList.add('hidden');
                        }, 3000);
                    } else {
                         response.json().then(data => {
                           if (Object.hasOwn(data, 'errors')) {
                             // Sanitize error messages before displaying
                             const sanitizedErrors = data["errors"]
                                 .map(error => sanitizeText(error["message"] || 'Unknown error'))
                                 .join(", ");
                             alert(sanitizedErrors || 'There was a problem sending your message. Please try again.');
                           } else {
                             alert('There was a problem sending your message. Please try again.');
                           }
                         }).catch(() => {
                             alert('There was a problem sending your message. Please try again.');
                         });
                    }
                }).catch(() => {
                    alert('There was a problem sending your message. Check your connection and try again.');
                });
            });
        }
    });
    </script>
</body>
</html>
